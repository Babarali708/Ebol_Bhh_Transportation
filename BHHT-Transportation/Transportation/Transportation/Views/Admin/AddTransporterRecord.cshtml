@{
    ViewData["Title"] = "AddTransporterRecord";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="content">

    <div class="row">

        <div class="col-md-8 col-md-offset-2">
            <div class="panel panel-flat custom-panel">
                <form id="AddForm" action="@Url.Action("PostAddTransporterRecord", "Admin")" method="post">
                    <input hidden name="DriverId" value="@ViewBag.DriverId" />
                    <div class="panel-heading">
                        <h2 class="panel-title text-center text-bold">Add Transporter Record</h2>
                    </div>

                    <div class="panel-body">
                        <legend class="text-bold text-uppercase"><span class="text-danger">*</span> Fields are mandatory to fill</legend>

                        <div hidden class="form-group">
                            <label class="text-bold">#No<span class="text-danger">*</span></label>
                            <input type="text" class="form-control" required name="No" readonly>
                        </div>
                        <div class="form-group">
                            <label class="text-bold">Date<span class="text-danger">*</span></label>
                            <input type="date" class="form-control" required name="Date" placeholder="Enter Date">
                        </div>

                        @*<div class="form-group">
                            <label class="text-bold">Select A Driver<span class="text-danger">*</span></label>
                            <select id="driverDropdown" class="form-control" required name="DriverId">
                                <option value="">Select a Driver</option>
                                
                            </select>
                        </div>*@


                        @*<div class="form-group">
                            <label class="text-bold">Select Attendant <span class="text-danger">*</span></label>
                            <select id="AttendentDropdown" class="form-control" required name="AttendentId">
                                <option value="">Select an Attendant</option>
                                
                            </select>
                        </div>*@
                        
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="text-bold">Tractor Number<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" required name="TractorNumber" placeholder="Enter Tractor Number">
                                </div>
                                <div class="col-md-6">
                                    <label class="text-bold">Tractor Driver<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" required name="TractorDriver" placeholder="Enter Tractor Driver">
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="text-bold">Trailer Number<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" required name="TrailerNumber" placeholder="Enter Trailer Number">
                                </div>
                                <div class="col-md-6">
                                    <label class="text-bold">Trailer Driver<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" required name="TrailerDriver" placeholder="Enter Trailer Driver">
                                </div>
                            </div>
                        </div>



                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="text-bold">From<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" required name="From" placeholder="Enter From Location">
                                </div>
                                <div class="col-md-6">
                                    <label class="text-bold">Barn From<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="BarnFrom" placeholder="Enter Barn From Location" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="text-bold">Phone From<span class="text-danger">*</span></label>
                                    <input type="number" min="0" class="form-control" name="PhoneFrom" placeholder="Enter Phone Number From" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="text-bold">Address From<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="AddressFrom" placeholder="Enter Address From" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="text-bold">From City And State<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="FromCityAndState" placeholder="Enter From City and State" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="text-bold">Ship To<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="ShipTo" placeholder="Enter Ship To Location" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="text-bold">Barn To<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="BarnTo" placeholder="Enter Barn To Location" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="text-bold">Phone To<span class="text-danger">*</span></label>
                                    <input type="number" min="0" class="form-control" name="ToPhoneNumber" placeholder="Enter Phone Number To" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-6">
                                    <label class="text-bold">Address To<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="AddressTo" placeholder="Enter Address To" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="text-bold">To City And State<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" name="ToCityAndState" placeholder="Enter To City and State" required>
                                </div>
                            </div>
                        </div>


                                <div class="text-right">
                                    <button type="submit" id="subBtn" class="btn btn-primary">Add <i class="icon-database-insert position-right"></i></button>
                                </div>
                    </div>

                </form>

            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    // Function to load driver data via Ajax
    function loadAttendents() {
        debugger;
        $.ajax({
            url: '@Url.Action("GetDriverUsers", "Ajax")',
            type: 'POST',
            dataType: 'json',
            data: { role: 4 },
            success: function (data) {
                debugger;
                var AttendentDropdown = $('#AttendentDropdown');
                AttendentDropdown.empty(); // Clear existing options
                AttendentDropdown.append($('<option>', {
                    value: '',
                    text: 'Select an Attendant'
                }));
                $.each(data, function (i, item) {
                    AttendentDropdown.append($('<option>', {
                        value: item.id,
                        text: item.firstName + ' ' + item.lastName
                    }));
                });
            },
            error: function () {
                console.error('Failed to load Attendents data.');
            }
        });
    }

    // Function to load driver data via Ajax
    function loadDrivers() {
        $.ajax({
            url: '@Url.Action("GetDriverUsers", "Ajax")',
            type: 'POST',
            dataType: 'json',
            data: { role: 2 },
            success: function (data) {
                debugger;
                var driverDropdown = $('#driverDropdown');
                driverDropdown.empty(); // Clear existing options
                driverDropdown.append($('<option>', {
                    value: '',
                    text: 'Select a Driver'
                }));
                $.each(data, function (i, item) {
                    driverDropdown.append($('<option>', {
                        value: item.id,
                        text: item.firstName + ' ' + item.lastName
                    }));
                });

                // Call the loadAttendents function after loading drivers
                loadAttendents();
            },
            error: function () {
                console.error('Failed to load driver data.');
            }
        });
    }

    // Load drivers when the page loads
    $(document).ready(function () {
        loadDrivers();
    });


    
</script>


